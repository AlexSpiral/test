name: Test Automation

on:
  workflow_dispatch:
      required: false

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Use Node.js ${{ matrix.node-version }}
        uses: actions/setup-node@v3
        with:
          node-version: ${{ matrix.node-version }}
          cache: 'npm'

      - name: Install Dependencies
        run: npm install

      - name: Run UI tests
        continue-on-error: true
        run:
          mkdir -p playwright-report
          npx playwright test


      - name: Post Link
        id: url
        run: echo "https://sova%2Dtest%2Dautomation%2Dreports.s3.amazonaws.com/${{ inputs.environment }}/${{ steps.date.outputs.date }}/index.html" >> "$GITHUB_STEP_SUMMARY"

#      SENDGRID EMAIL NOTIFICATION if inputs.environment == 'uat'
